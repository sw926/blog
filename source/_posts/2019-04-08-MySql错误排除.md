---
title: MySql错误排除
date: 2019-04-08 14:09:01
category: Other
tags: 
    - MySql
---

## 最大文件打开数量的问题

使用 `ulimit -a` 可以查看系统对单个进程的限制

``` sh
➜  ~ ulimit -a
-t: cpu time (seconds)              unlimited
-f: file size (blocks)              unlimited
-d: data seg size (kbytes)          unlimited
-s: stack size (kbytes)             8192
-c: core file size (blocks)         0
-v: address space (kbytes)          unlimited
-l: locked-in-memory size (kbytes)  unlimited
-u: processes                       1418
-n: file descriptors                7168
```

`ulimit -n` 是打开的最大文件数量限制，在 Mac 上可能是 256，如果是用了分表，默认情况下一个表对应一个文件，如果表的数量超过 256，打开超过256个文件的时候会报错。

解决方法：

1）
mysql 的 `my.cnf` 文件

``` conf
innodb_file_per_table = OFF 
```

关闭每个 table 建立一个文件，如果还是不行

2）
修改最大文件打开数

