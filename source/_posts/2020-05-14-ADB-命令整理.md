---
title: ADB 命令整理
date: 2020-05-14 10:45:27
tags: 
    - Android
category: Android
---

## 显示当前的 Activity 栈:

``` sh
adb shell dumpsys activity activities | sed -En -e '/Running activities/,/Run #0/p'
```

## 设置 prop

``` sh
adb shell setprop <name> <value>
```

Firebase 是使用这个来控制是否开启 DebugView

``` sh
adb shell setprop debug.firebase.analytics.app <package_name>
```

读取的使用 getprop

``` sh
adb shell getprop debug.firebase.analytics.app
```

在代码里面也可以读取：

``` kotlin
fun readProp(prop: String): String? {
    try {
        val process = Runtime.getRuntime().exec("getprop $prop")
        val ir = InputStreamReader(process.inputStream)
        val input = BufferedReader(ir)
        return input.readLine()
    } catch (e: IOException) {
        e.printStackTrace()
    }
    return null
} 
```

这样就可以通过 adb 命令来控制某个功能的开关

## 获取设备版本号

``` sh
```
